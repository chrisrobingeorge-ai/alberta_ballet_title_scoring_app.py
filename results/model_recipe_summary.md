# Model Recipe Summary

## Overview

This document summarizes the `model_xgb_remount_postcovid` safe model.
The model predicts ticket demand (log-transformed) using 15 features.

## Feature Groups

The safe model uses the following feature groups:

### 1. Digital Attention / Awareness Signals
- `wiki`: Wikipedia page views
- `trends`: Google Trends interest
- `youtube`: YouTube engagement
- `chartmetric`: chartmetric plays/popularity

### 2. Historical Priors
- `prior_total_tickets`: Sum of tickets from all prior runs
- `prior_run_count`: Number of previous runs
- `ticket_median_prior`: Median tickets per prior run

### 3. Remount Features
- `years_since_last_run`: Years since the last production
- `is_remount_recent`: Was remounted within 2 years (binary)
- `is_remount_medium`: Remounted 2-4 years ago (binary)
- `run_count_prior`: Number of prior runs (same as prior_run_count)

### 4. Calendar/Context
- `month_of_opening`: Month when the show opens
- `holiday_flag`: Opens during holiday season (Nov-Jan)

### 5. Show Descriptors
- `category`: Show category (e.g., classic_story_ballet, contemporary)
- `gender`: Gender composition of the cast

---

## Top 10 Features by Permutation Importance

| Rank | Feature | Importance | Direction (from surrogate) |
|------|---------|------------|---------------------------|
| 1 | `prior_total_tickets` | 1.6960 | ↑ positive |
| 2 | `ticket_median_prior` | 0.0816 | ↑ positive |
| 3 | `wiki` | 0.0333 | ↓ negative |
| 4 | `youtube` | 0.0003 | ↑ positive |
| 5 | `trends` | 0.0000 | ↑ positive |
| 6 | `chartmetric` | 0.0000 | ↑ positive |
| 7 | `prior_run_count` | 0.0000 | ↓ negative |
| 8 | `years_since_last_run` | 0.0000 | ↓ negative |
| 9 | `is_remount_recent` | 0.0000 | ↓ negative |
| 10 | `is_remount_medium` | 0.0000 | ↑ positive |

---

## Approximate Linear Model (Surrogate)

To provide an interpretable "rule-of-thumb" approximation, we fit a Ridge regression
model to the XGBoost predictions. This surrogate captures the main linear effects.

**Surrogate R² (vs XGBoost):** 0.993

This means the linear surrogate explains ~99% of the XGBoost model's variance.

### Top 10 Coefficients (Standardized)

| Term | Coefficient | Interpretation |
|------|-------------|----------------|
| `ticket_median_prior` | +0.2265 | Higher value → more tickets |
| `prior_run_count` | -0.2130 | Higher value → fewer tickets |
| `prior_total_tickets` | +0.1908 | Higher value → more tickets |
| `is_remount_recent` | -0.0749 | Higher value → fewer tickets |
| `category_contemporary` | -0.0746 | Higher value → fewer tickets |
| `category_classic_romance` | +0.0706 | Higher value → more tickets |
| `youtube` | +0.0544 | Higher value → more tickets |
| `category_contemporary_mixed_bill` | -0.0502 | Higher value → fewer tickets |
| `holiday_flag` | -0.0426 | Higher value → fewer tickets |
| `category_pop_ip` | -0.0366 | Higher value → fewer tickets |
| `intercept` | 8.1094 | Baseline prediction |

---

## Verbal Summary

Based on the analysis above, the model's behavior can be summarized as:

- **Predicted tickets increase** with higher values of: `ticket_median_prior`, `prior_total_tickets`, `category_classic_romance`, `youtube`, `trends`
- **Predicted tickets decrease** with higher values of: `prior_run_count`, `is_remount_recent`, `category_contemporary`, `category_contemporary_mixed_bill`, `holiday_flag`

The most important driver is `prior_total_tickets` (historical performance),
which makes intuitive sense: shows that have sold well in the past tend to sell well again.

---

## Model Metadata

- **Training Date:** 2025-12-01T00:58:42.163151
- **Model Type:** xgboost
- **Training Samples:** 35
- **Target Column:** target_ticket_median
- **CV R² (mean ± std):** 0.856 ± 0.127

---

*Generated by `scripts/analyze_safe_model.py`*